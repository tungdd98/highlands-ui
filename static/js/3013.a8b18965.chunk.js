"use strict";(self.webpackChunkhighlands_ui=self.webpackChunkhighlands_ui||[]).push([[3013],{70978:function(n,e,i){var r=i(29439),t=i(72791),l=i(59598),s=i(14398),d=i(5289),o=i(65661),a=i(13400),c=i(39157),u=i(64554),h=i(20890),x=i(81918),m=i(10703),Z=i(39281),j=i(79836),f=i(22041),p=i(35855),v=i(53994),b=i(53382),g=i(97123),y=i(36151),C=i(8785),D=i(15897),S=i(61146),P=i.n(S),E=i(65697),R=i(83506),I=i(42185),M=i(38463),O=i(80184),N=function(n){var e,i,S,N=n.order,w=n.isOpenDetailDialog,W=n.handleCloseDetailDialog,k=(0,D.$)().t,U=(0,M.TL)(),A=(0,M.CG)((function(n){return n})),T=A.payment.allPayment,F=A.delivery.allDelivery,_=(0,t.useState)(null),G=(0,r.Z)(_,2),L=G[0],q=G[1],z=(0,t.useRef)(),B=(0,t.useMemo)((function(){return null===T||void 0===T?void 0:T.find((function(n){return n.id===(null===N||void 0===N?void 0:N.paymentId)}))}),[T,null===N||void 0===N?void 0:N.paymentId]),$=(0,t.useMemo)((function(){return null===F||void 0===F?void 0:F.find((function(n){return n.id===(null===N||void 0===N?void 0:N.deliveryId)}))}),[F,null===N||void 0===N?void 0:N.deliveryId]),H=(0,t.useMemo)((function(){return N?E.ig[N.status]:null}),[N]);return(0,t.useEffect)((function(){null!==N&&void 0!==N&&N.id&&w&&U((0,E.dz)(N.id)).then(C.SI).then(q)}),[U,w,null===N||void 0===N?void 0:N.id]),(0,t.useEffect)((function(){w||q(null)}),[w]),N?(0,O.jsxs)(d.Z,{open:w,maxWidth:"lg",keepMounted:!0,fullWidth:!0,children:[(0,O.jsx)(o.Z,{sx:{m:0,p:2},children:(0,O.jsx)(a.Z,{onClick:W,"aria-label":"close",sx:{position:"absolute",right:8,top:8,color:function(n){return n.palette.grey[500]}},children:(0,O.jsx)(l.Z,{})})}),(0,O.jsxs)(c.Z,{ref:z,children:[(0,O.jsxs)(u.Z,{sx:{mb:2,pb:2,borderBottom:1,borderColor:"divider"},children:[(0,O.jsx)(h.Z,{variant:"h6",sx:{mb:2,fontWeight:600},children:k("label.User Information",{ns:"admin"})}),(0,O.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,O.jsxs)(h.Z,{variant:"body1",sx:{pr:1,mb:1,fontWeight:600},children:[k("label.Fullname",{ns:"admin"}),":"]}),(0,O.jsx)(h.Z,{variant:"body1",children:null===(e=N.location)||void 0===e?void 0:e.name})]}),(0,O.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,O.jsxs)(h.Z,{variant:"body1",sx:{pr:1,mb:1,fontWeight:600},children:[k("label.Address",{ns:"admin"}),":"]}),(0,O.jsx)(h.Z,{variant:"body1",children:null===(i=N.location)||void 0===i?void 0:i.address})]}),(0,O.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,O.jsxs)(h.Z,{variant:"body1",sx:{pr:1,mb:1,fontWeight:600},children:[k("label.Phone number",{ns:"admin"}),":"]}),(0,O.jsx)(h.Z,{variant:"body1",children:null===(S=N.location)||void 0===S?void 0:S.phone})]}),(0,O.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,O.jsxs)(h.Z,{variant:"body1",sx:{pr:1,mb:1,fontWeight:600},children:[k("label.Created at",{ns:"admin"}),":"]}),(0,O.jsx)(h.Z,{variant:"body1",children:(0,I.p)(N.createdAt)})]}),(0,O.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,O.jsxs)(h.Z,{variant:"body1",sx:{pr:1,mb:1,fontWeight:600},children:[k("label.Status",{ns:"admin"}),":"]}),H&&(0,O.jsx)(x.Z,{label:k("label.".concat(H.label),{ns:"admin"}),color:H.color,size:"small"})]})]}),(0,O.jsxs)(u.Z,{sx:{mb:2,pb:2,borderBottom:1,borderColor:"divider"},children:[(0,O.jsx)(h.Z,{variant:"h6",fontWeight:600,sx:{mb:2},children:k("label.Payment method",{ns:"admin"})}),(0,O.jsx)(h.Z,{variant:"body1",children:null===B||void 0===B?void 0:B.title})]}),(0,O.jsxs)(u.Z,{sx:{mb:2,pb:2,borderBottom:1,borderColor:"divider"},children:[(0,O.jsx)(h.Z,{variant:"h6",fontWeight:600,sx:{mb:2},children:k("label.Shipping method",{ns:"admin"})}),(0,O.jsx)(h.Z,{variant:"body1",children:null===$||void 0===$?void 0:$.title})]}),(0,O.jsxs)(u.Z,{sx:{mb:2,pb:2},children:[(0,O.jsx)(h.Z,{variant:"h6",fontWeight:600,sx:{mb:2},children:k("label.Order details",{ns:"admin"})}),(0,O.jsx)(m.Z,{elevation:3,children:(0,O.jsx)(Z.Z,{children:(0,O.jsxs)(j.Z,{children:[(0,O.jsx)(f.Z,{children:(0,O.jsxs)(p.Z,{children:[(0,O.jsx)(v.Z,{children:k("label.Product",{ns:"admin"})}),(0,O.jsx)(v.Z,{align:"right",children:k("label.Price",{ns:"admin"})}),(0,O.jsx)(v.Z,{align:"right",children:k("label.Quantity",{ns:"admin"})}),(0,O.jsx)(v.Z,{align:"right",children:k("label.Total",{ns:"admin"})})]})}),(0,O.jsx)(b.Z,{children:L&&L.length?L.map((function(n){return(0,O.jsxs)(p.Z,{children:[(0,O.jsx)(v.Z,{component:"th",scope:"row",children:(0,O.jsx)(h.Z,{variant:"body2",fontWeight:500,children:n.product.title})}),(0,O.jsx)(v.Z,{align:"right",children:(0,R.j)(n.product.price)}),(0,O.jsx)(v.Z,{align:"right",children:n.quantity}),(0,O.jsx)(v.Z,{align:"right",children:(0,R.j)(n.product.price*n.quantity)})]},n.product.id)})):(0,O.jsx)(p.Z,{children:(0,O.jsxs)(v.Z,{colSpan:5,children:[k("label.No products",{ns:"admin"}),"."]})})})]})})})]})]}),N.status===E.DR.SUCCESS&&(0,O.jsx)(g.Z,{sx:{px:3,py:2},children:(0,O.jsx)(P(),{trigger:function(){return(0,O.jsx)(y.Z,{variant:"contained",color:"success",startIcon:(0,O.jsx)(s.Z,{}),children:k("button.Download as Pdf",{ns:"client"})})},content:function(){return z.current?z.current:null}})})]}):null};e.Z=(0,t.memo)(N)},8056:function(n,e,i){var r;i.d(e,{F:function(){return r}}),function(n){n.CREATE_SUCCESS="Created success",n.DELETE_SUCCESS="Deleted success",n.UPDATE_SUCCESS="Updated success",n.ERROR="Something error",n.ADD_PRODUCT_SUCCESS="Add product success",n.OVER_PRODUCT_IN_CART="Over product"}(r||(r={}))},83013:function(n,e,i){i.r(e),i.d(e,{default:function(){return G}});var r=i(29439),t=i(72791),l=i(64554),s=i(20890),d=i(15897),o=i(27735),a=i(70978),c=i(63039),u=i(65697),h=i(85405),x=i(38463),m=i(1413),Z=i(10703),j=i(39281),f=i(79836),p=i(22041),v=i(35855),b=i(53994),g=i(53382),y=i(67492),C=i(23573),D=i(13400),S=i(81918),P=i(42185),E=i(80184),R=function(n){var e=n.order,i=n.handleOpenMenu,r=(0,d.$)().t,l=(0,x.CG)((function(n){return n})),o=l.payment.allPayment,a=l.delivery.allDelivery,c=(0,t.useMemo)((function(){return null===o||void 0===o?void 0:o.find((function(n){return n.id===e.paymentId}))}),[o,e.paymentId]),h=(0,t.useMemo)((function(){return null===a||void 0===a?void 0:a.find((function(n){return n.id===e.deliveryId}))}),[a,e.deliveryId]),m=(0,t.useMemo)((function(){return u.ig[e.status]}),[e.status]);return(0,E.jsxs)(v.Z,{hover:!0,sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,E.jsx)(b.Z,{width:80,children:(0,E.jsx)(D.Z,{onClick:function(n){return i(n,e)},children:(0,E.jsx)(C.Z,{})})}),(0,E.jsx)(b.Z,{component:"th",scope:"row",children:e.id}),(0,E.jsx)(b.Z,{children:(null===e||void 0===e?void 0:e.location)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(s.Z,{children:e.location.name}),(0,E.jsx)(s.Z,{variant:"caption",component:"div",children:e.location.address}),(0,E.jsx)(s.Z,{variant:"caption",component:"div",children:e.location.phone})]})}),(0,E.jsx)(b.Z,{children:c&&c.title}),(0,E.jsx)(b.Z,{children:h&&h.title}),(0,E.jsx)(b.Z,{children:m&&(0,E.jsx)(S.Z,{label:r("label.".concat(m.label),{ns:"admin"}),color:m.color,size:"small"})}),(0,E.jsx)(b.Z,{children:(0,P.p)(e.createdAt)})]})},I=(0,t.memo)(R),M=function(n){var e=n.orders,i=n.total,r=n.queries,t=n.setQueries,l=n.handleOpenMenu,s=(0,d.$)().t;return(0,E.jsxs)(Z.Z,{elevation:3,children:[(0,E.jsx)(j.Z,{children:(0,E.jsxs)(f.Z,{children:[(0,E.jsx)(p.Z,{children:(0,E.jsxs)(v.Z,{children:[(0,E.jsx)(b.Z,{}),(0,E.jsx)(b.Z,{children:s("label.ID",{ns:"admin"})}),(0,E.jsx)(b.Z,{sx:{minWidth:200},children:s("label.Billing Address",{ns:"admin"})}),(0,E.jsx)(b.Z,{children:s("label.Payment method",{ns:"admin"})}),(0,E.jsx)(b.Z,{children:s("label.Delivery method",{ns:"admin"})}),(0,E.jsx)(b.Z,{children:s("label.Status",{ns:"admin"})}),(0,E.jsx)(b.Z,{children:s("label.Created at",{ns:"admin"})})]})}),(0,E.jsx)(g.Z,{children:e.map((function(n){return(0,E.jsx)(I,{order:n,handleOpenMenu:l},n.id)}))})]})}),(0,E.jsx)(y.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:i,rowsPerPage:(null===r||void 0===r?void 0:r.perPage)||5,page:r.page-1,onPageChange:function(n,e){t((function(n){return(0,m.Z)((0,m.Z)({},n),{},{page:e+1})}))},onRowsPerPageChange:function(n){t((function(e){return(0,m.Z)((0,m.Z)({},e),{},{page:1,perPage:parseInt(n.target.value,10)})}))},labelRowsPerPage:s("label.Rows per page",{ns:"admin"})})]})},O=(0,t.memo)(M),N=i(80911),w=i(23786),W=i(49900),k=i(8785),U=i(8056),A=i(12583),T=i(82179),F=function(n){var e=n.anchorEl,i=n.orderSelected,r=n.handleCloseMenu,l=n.handleOpenDetailDialog,s=(0,d.$)().t,o=(0,x.TL)(),a=(0,t.useMemo)((function(){return!i||i.status!==u.DR.PENDING}),[i]),c=(0,t.useMemo)((function(){return!i||i.status!==u.DR.PENDING&&i.status!==u.DR.CONFIRMED}),[i]),h=(0,t.useMemo)((function(){return!i||i.status!==u.DR.PENDING&&i.status!==u.DR.CANCELING}),[i]),m=(0,t.useMemo)((function(){return!i||i.status!==u.DR.PENDING&&i.status!==u.DR.CONFIRMED&&i.status!==u.DR.SHIPPING}),[i]),Z=function(n){i&&o((0,u.qB)({orderId:i.id,status:n})).then(k.SI).then((function(){o((0,T.WP)({message:U.F.UPDATE_SUCCESS}))})).catch((function(){return(0,A.y)({dispatch:o})}))};return(0,E.jsxs)(N.Z,{anchorEl:e,open:!!e,onClose:r,onClick:r,transformOrigin:{horizontal:"left",vertical:"top"},anchorOrigin:{horizontal:"left",vertical:"top"},PaperProps:{style:{minWidth:160}},children:[(0,E.jsx)(w.Z,{disabled:a,onClick:function(){return Z(u.DR.CONFIRMED)},children:(0,E.jsx)(W.Z,{children:s("label.Confirmed order",{ns:"admin"})})}),(0,E.jsx)(w.Z,{disabled:c,onClick:function(){return Z(u.DR.SHIPPING)},children:(0,E.jsx)(W.Z,{children:s("label.Shipping order",{ns:"admin"})})}),(0,E.jsx)(w.Z,{disabled:m,onClick:function(){return Z(u.DR.SUCCESS)},children:(0,E.jsx)(W.Z,{children:s("label.Done order",{ns:"admin"})})}),(0,E.jsx)(w.Z,{disabled:h,onClick:function(){return Z(u.DR.CANCELED)},children:(0,E.jsx)(W.Z,{children:s("label.Cancel order",{ns:"admin"})})}),(0,E.jsx)(w.Z,{onClick:l,children:(0,E.jsx)(W.Z,{children:s("label.View detail",{ns:"admin"})})})]})},_=(0,t.memo)(F),G=function(){var n=(0,d.$)().t,e=(0,x.TL)(),i=(0,x.CG)((function(n){return n.order})).orders,m=(0,t.useState)(!0),Z=(0,r.Z)(m,2),j=Z[0],f=Z[1],p=(0,t.useState)({page:1,perPage:5}),v=(0,r.Z)(p,2),b=v[0],g=v[1],y=(0,t.useState)(null),C=(0,r.Z)(y,2),D=C[0],S=C[1],P=(0,t.useState)(null),R=(0,r.Z)(P,2),I=R[0],M=R[1],N=(0,t.useState)(!1),w=(0,r.Z)(N,2),W=w[0],k=w[1];return(0,t.useEffect)((function(){e((0,u.Fw)(b)).then((function(){Promise.all([e((0,h.Ox)()),e((0,c.w0)())]).finally((function(){return f(!1)}))}))}),[e,b]),j?(0,E.jsx)(o.Z,{}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(l.Z,{py:3,children:(0,E.jsxs)(s.Z,{variant:"h5",children:[n("common.Manage",{ns:"admin"}),"\xa0",n("sidebar.Orders",{ns:"admin"})]})}),i&&i.list.length?(0,E.jsx)(O,{orders:i.list,total:i.totalItems,queries:b,setQueries:g,handleOpenMenu:function(n,e){S(n.currentTarget),M(e)}}):(0,E.jsx)(s.Z,{children:n("common.No data",{ns:"admin"})}),(0,E.jsx)(_,{orderSelected:I,anchorEl:D,handleCloseMenu:function(){S(null)},handleOpenDetailDialog:function(){k(!0)}}),(0,E.jsx)(a.Z,{order:I,isOpenDetailDialog:W,handleCloseDetailDialog:function(){k(!1)}})]})}},83506:function(n,e,i){i.d(e,{j:function(){return r}});var r=function(n,e){return new Intl.NumberFormat("vi-VN",{style:e?void 0:"currency",currency:"VND"}).format(n)}},42185:function(n,e,i){i.d(e,{p:function(){return t}});var r=i(40646),t=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd HH:mm";return(0,r.Z)(new Date(n),e)}},12583:function(n,e,i){i.d(e,{y:function(){return l}});var r=i(8056),t=i(82179),l=function(n){(0,n.dispatch)((0,t.WP)({message:r.F.ERROR}))}}}]);
//# sourceMappingURL=3013.a8b18965.chunk.js.map